---
language: c
compiler:
  - clang
  - gcc
os:
  - linux
  - osx
addons:
  apt:
    packages:
      - python-docutils
before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update          ; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install docutils; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install nghttp2 ; fi
  - ./autogen.sh
  - ./configure
dist: trusty
sudo: false
osx_image: xcode8.2
script:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
      export PYTHONPATH=`brew --prefix`/lib/python2.7/site-packages; fi
  - make -j3 check VERBOSE=1
